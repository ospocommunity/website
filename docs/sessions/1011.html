<!DOCTYPE HTML>

<html>
<head>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130779021-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-130779021-1');
    </script>
    <title>ApacheCon @Home</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>

    <meta property='og:title' content='ApacheCon @Home'/>
    <meta property='og:url' content='//apachecon.com/acah2021/'/>
    <base href="https://elek.github.io/acah2021/"/>
    
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.dropotron.min.js"></script>
    <script src="js/skel.min.js"></script>
    <script src="js/skel-layers.min.js"></script>
    <script src="js/init.js"></script>
    <noscript>
        <link rel="stylesheet" href="css/skel.css"/>
        <link rel="stylesheet" href="css/style.css"/>
    </noscript>
    
</head>
<body>


<div class="wrapper style1">

    
<div id="header">
    <div class="container">
        <a href="index.html"><img class="logo-img" src="images/apachecon.png" height="30" ALIGN=CENTER></a>
        <nav id="nav">
    <ul>
        <li><a href="cfp.html">Call for Presentations</a></li>
         <li><a href="https://hopin.to/events/apachecon-home">Register</a></li>
         <li><a href="http://s.apache.org/acah-tshirt">TShirt</a></li>
         <li><a href="tracks.html">Tracks</a></li>
         <li><a href="sessions.html">Schedule</a></li>
        <li><a href="conduct.html">Code of Conduct</a></li>
    </ul>
</nav>

    </div>
</div>

    
    <div id="main" class="wrapper style4">

        
        <div id="content" class="container">
            <section>
                <header class="major">
                    <h3>Next Generation Cassandra Compaction, Going beyond LCS</h3>
                    <h4>Joey Lynch</h4>
                    2019-09-10 12:15
                    <a class="label" href="tracks/cassandra.html">#cassandra</a></li>
                </header>

                <p>Cassandra users with general purpose workloads typically must choose the lesser of two evils between the default “write optimized”  Size Tiered Compaction Strategy (STCS) and the “read optimized” Leveled Compaction Strategy (LCS). It is typical these days to hear “use LCS unless it explodes, in which case use STCS…unless that explodes, in which case you are out of luck”. I believe that by taking what we as a community learned from the development and real world deployment of LCS, we can create a next generation compaction strategy which offers all of the benefits of LCS with few of the drawbacks. I will begin this talk with an overview of the existing general purpose options, and explore their deficiencies. In particular, we will explore how STCS naïvely groups SSTables of similar size together regardless of read amplification, expends system resources compacting data that does not benefit from compaction, and creates large files that are difficult to process both by Cassandra and downstream systems. The LCS compaction algorithm was developed to mitigate many of these issues. However, LCS suffers from issues of its own: implementation bugs caused by the complexity of the algorithm, significant write amplification introduced in the L0 to L1 transition, and a lack of efficient full compaction. LCS is a worthwhile compaction strategy, but these flaws prevent it from being applied universally to general purpose workloads. Once we have a firm understanding of the issues facing current implementations, I will present a number of potential incremental improvements to the existing choices. I’ll also synthesize these ideas into a blueprint for a new, general purpose, compaction strategy.  A key design consideration is to offer users a single compaction interface with easy to understand tunables that adapt to all use cases historically covered by either STCS or LCS. Once I have laid out the proposal, I will open the topic for feedback from other developers in the room and I hope that at the end we will have built consensus around the key challenges of Cassandra compaction, as well as come to a decision on the best path forward.</p>


            </section>
        </div>
    </div>

    

<div id="footer">
  <section class="container">
    <header class="major">
      <h2>Connect with us</h2>

    </header>
    <table><tr><td><a href="https://www.facebook.com/ApacheSoftwareFoundation/">
        <img width="66" src="images/iconmonstr-facebook-6-96.png"></a></td><td>
        <a href="https://twitter.com/ApacheCon"><img width="66" src="images/iconmonstr-twitter-1-96.png"></td><td><a href="http://s.apache.org/apachecon-slack"><img width="66" src="images/slack-icon.png"></tD></tr></table>				<hr /><p>ApacheCon operates under the terms of the <a href="https://www.apache.org/foundation/policies/conduct.html">Apache Software Foundation Code of Conduct</a>. </p>
    <hr />
    <p class="byline">Copyright 2021, <a href="https://www.apache.org/">The Apache Software Foundation</a>, Licensed under the Apache License, Version 2.0. <br />Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</div>
    </section>
</div>
</div>

</body>
</html>

